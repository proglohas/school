<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ç°¡è€å¸«çš„æ³¡æ³¡å¯¦é©—å®¤ - 40å¹´çš„é‚è¼¯è¨˜æ†¶</title>
    <style>
        body { 
            font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; 
            display: flex; flex-direction: column; align-items: center; 
            background-color: #f4f7f6; margin: 0; min-height: 100vh;
        }

        /* æµ®æ°´å°ï¼šç°¡è€å¸«çš„æ’åºæ³•è¨“ç·´ */
        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: -1;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><text x="50%" y="50%" font-size="20" fill="rgba(0,0,0,0.03)" font-family="Arial" text-anchor="middle" transform="rotate(-30, 200, 150)">ç°¡è€å¸«çš„æ’åºæ³•è¨“ç·´</text></svg>');
            background-repeat: repeat;
        }

        .container { margin-top: 50px; display: flex; flex-direction: column; gap: 30px; align-items: center; }
        
        /* æ’åºå€åŸŸ */
        .row { 
            display: flex; gap: 15px; min-height: 160px; padding: 30px; 
            background: white; border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            position: relative;
        }
        
        .card {
            width: 70px; height: 100px; background: #fff; border: 2px solid #2d3436;
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            font-size: 28px; font-weight: bold; position: relative; transition: all 0.4s ease;
            box-shadow: 4px 4px 0px #2d3436;
        }

        /* æ­£åœ¨æ¯”è¼ƒçš„ç‹€æ…‹ */
        .card.comparing { border-color: #0984e3; transform: translateY(-15px); background: #e3f2fd; }
        
        /* æŠµé”çµ‚é»çš„æ°£æ³¡ */
        .card.sorted { 
            border-color: #6c5ce7; background: #efecff; color: #6c5ce7; 
            box-shadow: 4px 4px 0px #6c5ce7; opacity: 0.8;
            animation: arrive 0.5s ease;
        }

        @keyframes arrive {
            0% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* è—è‰²æŒ‡å¼•æ¡† */
        .bubble-focus {
            position: absolute; width: 164px; height: 120px;
            border: 4px solid #0984e3; border-radius: 15px;
            top: 20px; pointer-events: none; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: rgba(9, 132, 227, 0.05);
        }

        .status { font-size: 1.3rem; font-weight: bold; height: 40px; color: #2d3436; }
        
        .btn-group { display: flex; gap: 15px; }
        button { 
            padding: 12px 25px; cursor: pointer; border-radius: 50px; border: none; 
            font-size: 16px; font-weight: bold; transition: 0.2s;
        }
        #swap-btn { background: #ff7675; color: white; box-shadow: 0 4px #d63031; }
        #no-swap-btn { background: #55efc4; color: #2d3436; box-shadow: 0 4px #00b894; }
        #reload-btn { background: #dfe6e9; color: #2d3436; }
        button:active { transform: translateY(3px); box-shadow: none; }
    </style>
</head>
<body>

    <h2 style="letter-spacing: 2px;">ç°¡è€å¸«çš„æ³¡æ³¡å¯¦é©—å®¤</h2>
   

    <div class="container">
        <div id="upper-row" class="row">
            <div id="focus-box" class="bubble-focus"></div>
        </div>
        
        <div class="btn-group">
            <button id="reload-btn">é‡æ–°æ´—ç‰Œ</button>
            <button id="swap-btn">å·¦å¤§æ–¼å³ (äº¤æ›)</button>
            <button id="no-swap-btn">å·¦å°æ–¼å³ (å¾€ä¸‹èµ°)</button>
        </div>
        
        <div id="message" class="status"></div>
    </div>

<script>
    const row = document.getElementById('upper-row');
    const focusBox = document.getElementById('focus-box');
    const message = document.getElementById('message');
    const reloadBtn = document.getElementById('reload-btn');
    const swapBtn = document.getElementById('swap-btn');
    const noSwapBtn = document.getElementById('no-swap-btn');

    let cards = [];
    let n = 10;
    let i = 0, j = 0;

    function init() {
        i = 0; j = 0;
        cards = Array.from({length: 13}, (_, idx) => idx + 1)
                     .sort(() => Math.random() - 0.5)
                     .slice(0, n);
        message.textContent = "ç¬¬ä¸€è¼ªæƒæé–‹å§‹ï¼Œæº–å‚™è®“æœ€å¤§çš„æ•¸å­—æµ®ä¸Šå»...";
        render();
    }

    function render() {
        // æ›´æ–°ç‰Œé¢
        const oldCards = row.querySelectorAll('.card');
        oldCards.forEach(c => c.remove());

        cards.forEach((val, index) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.textContent = val;
            if (index >= n - i) card.classList.add('sorted');
            if (index === j || index === j + 1) {
                if (i < n - 1) card.classList.add('comparing');
            }
            row.appendChild(card);
        });

        // ç§»å‹•è—æ¡†
        if (i < n - 1) {
            focusBox.style.display = 'block';
            focusBox.style.left = (30 + j * 85) + "px";
        } else {
            focusBox.style.display = 'none';
        }
    }

    function process(doSwap) {
        if (i >= n - 1) return;
        const vL = cards[j], vR = cards[j+1];

        if (doSwap) {
            if (vL > vR) {
                [cards[j], cards[j+1]] = [cards[j+1], cards[j]];
                message.textContent = `æ³¡æ³¡äº¤æ›ä¸­... ${vL} æ­£åœ¨å¾€å³ç§»å‹•ã€‚`;
            } else {
                message.textContent = `ä¸å°å–”ï¼Œ${vL} ä¸¦æ²’æœ‰æ¯” ${vR} å¤§ã€‚`;
                return;
            }
        } else {
            if (vL <= vR) {
                message.textContent = "ä¿æŒåŸä½ï¼Œç¹¼çºŒæª¢æŸ¥ä¸‹ä¸€å€‹ã€‚";
            } else {
                message.textContent = `${vL} æ¯” ${vR} å¤§ï¼Œæ‡‰è©²è¦äº¤æ›å–”ï¼`;
                return;
            }
        }

        j++;
        if (j >= n - 1 - i) {
            i++; j = 0;
            message.textContent = i < n-1 ? `ç¬¬ ${i} å€‹æœ€å¤§çš„æ°£æ³¡å·²å°±ä½ã€‚` : "ğŸ‰ æ‰€æœ‰æ°£æ³¡éƒ½æˆåŠŸä¸Šæµ®äº†ï¼";
        }
        render();
    }

    swapBtn.onclick = () => process(true);
    noSwapBtn.onclick = () => process(false);
    reloadBtn.onclick = init;
    init();
</script>

</body>
</html>